{% extends "admin/login.html" %}
{% load i18n static %}

{% block content %}
<div id="content-main">
    {% if messages %}
    <ul class="messagelist">
        {% for message in messages %}
          <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    <p>A verification code has been sent to <strong>{{ user.email }}</strong>.</p>
    
    <form action="{{ app_path }}" method="post" id="login-form">
        {% csrf_token %}
        <div class="form-row">
            <label for="id_otp" class="required">Verification Code:</label>
            <input type="text" name="otp" id="id_otp" required maxlength="6" autofocus 
                   style="width: 100%; box-sizing: border-box; padding: 10px; font-size: 1.2em; text-align: center; letter-spacing: 5px;">
        </div>
        
        <div class="submit-row">
            <input type="submit" value="Verify and Login" style="width: 100%; height: 40px; background: #417690; color: white; border: none; cursor: pointer;">
        </div>
    </form>
    
    <div class="submit-row" style="text-align: center; margin-top: 10px;">
        <a href="{% url 'admin:login' %}">Back to login</a>
    </div>
</div>

<script type="text/javascript">
    document.getElementById('id_otp').focus();
</script>
{% endblock %}
